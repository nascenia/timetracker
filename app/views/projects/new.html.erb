<h1>Create new project</h1>
<hr>

<%= form_for @project, html: {class: '', 'data-controller' => 'project'} do |f| %>
  <div class="mb-3 row">
    <%= label :project_name, 'Project name', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= f.text_field :project_name, class: 'form-control', :maxlength => "64", required: 'true' %>
    </div>
  </div>

  <div class="mb-3 row">
    <%= label :project_description, 'Project description', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= f.text_area :description, size: "60x12", class: 'form-control', :maxlength => "128" %>
    </div>
  </div>

  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label">&nbsp;</label>
    <div class="col-sm-10">
      <%= f.radio_button :is_active, 'true', :checked => true %>
      <%= label :contactmethod_email, 'Active' %>
      <%= f.radio_button :is_active, 'false' %>
      <%= label :contactmethod_sms, 'Not Active' %>
    </div>
  </div>

  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label">Select users</label>
    <div class="col-sm-10">
       <% User.active.each do |user| %>
        <div class="col-sm-12">
          <%= f.check_box :users, { multiple: true }, user.id %>
            <%= user.name %>
        </div>
      <% end %>
    </div>
  </div>
  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label">&nbsp;</label>
    <div class="col-sm-10">
      <%= f.submit "Submit", class: 'btn btn-primary' %>
    </div>
  </div>  
<% end %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/js/bootstrap.min.js"></script>
<script type="text/javascript">
    // run callbacks
    var user_ids = [];
    $('#callbacks').multiSelect({
        afterSelect: function(values){
            // alert("Select value: "+values);
            user_ids.push(values);
            $('#ids').val(user_ids);
        },
        afterDeselect: function(values){
            // alert("Deselect value: "+values);
            user_ids.splice(user_ids.indexOf(values),1);
            $('#ids').val(user_ids);

        }
    });
</script>